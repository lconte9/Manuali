<!DOCTYPE html>
<html lang="it">
    <head>
        <meta charset="UTF-8">
        <meta name="viewpoint" content="width-device-width, initial-scale-1.0">
        <meta http-equiv="X-UA-Compatible" content="ie-edge">
        
        <title>
            D3.js Tutorial
        </title>
        <script src="https://d3js.org/d3.v5.min.js"></script>
        <link rel="stylesheet" href="style.css">
    </head>
    <body>

        <!--

        <script>
            d3.select("body")//seleziona il primo elemento passato come oggetto
                .append("p")//inserisci un tag p e ne restituisce un riferimento
                .text("Nuovo paragrafo"); //inserisce nel riferimento il valore di testo passato come argomento
        </script>

        -->

        <!--

        <script>

            let dataset = [3, 5, 8, 12, 18, 11, 8];//info da graficare

            d3.select("body")//seleziona il primo elemento passato come oggetto
                .selectAll("p")//seleziona tutti gli elementi p presenti nel body ma in questo caso non ce ne sono 
                .data(dataset)//equivale ad un ciclo for effettuato sul dataset utilizzando il suoi indice 
                              //ed esegue il codice succesivo un numero pari alla dimensione dell'array
                              //permette anche l'accesso ai dati contenuti (simile a map js)
                .enter()//crea un palceholder al posto dei paragrafi p inesistenti 
                .append("p")
                .text(function(d) { //d rappresenta l'elemento del dataset
                    return d;
                })
                .style("color", function(d){
                    if(d>10){
                        return "red";
                    }else{
                        return "blue";
                    }
                });//modifica il css dell'elemento HTML
        </script>

        -->

        <!--

        <script>

            let dataset = [3, 5, 8, 12, 18, 11, 8];//info da graficare

            d3.select("body")
                .selectAll("div")
                .data(dataset)
                .enter()
                .append("div")//inserisce un elemento div
                .attr("class", "bar")//aggiunge all'elemento l'attributo class con valore bar presente nel file style.css
                .style("height", function(d){
                    var barHeight = d*5;    //moltiplica il valore nel dataset moltiplicandolo per 5 per rendere visibile 
                                            //il valore sar√† proporzionato alla dimensione che si vuole ottenere del grafico

                    return barHeight + "px";//restuituisce il valore con l'aggiunta della dimensione px
                })
        </script>

        -->
       
        <script>
            let dataset = [3, 5, 8, 12, 18, 11, 8];//info da graficare

            let w = 500;    //larghezza dell'svg
            let h = 100;    //altezza dell'svg

            let svg = d3.select("body").append("svg");//definiamo un riferimento all'elemento svg creato con questo comando

            svg.attr("width", w).attr("height", h); //aggiungiamo gli attributi width e height

            svg.selectAll("rect")//Selezioniamo tutti gli elementi rect (anche se inesistenti)
                .data(dataset)//per ogni elemento del dataset
                .enter()//avviamo la sequenza di operazioni anche se gli elementi rect non esistono
                .append("rect")//creiamo una rect
                .attr("x", function(d, i){
                    return i * (w / dataset.length) //diamo come posizione su x il valore dell'indice per la dimensione 
                                                    //massima per la quale ogni barra entri nello spazio di svg
                })
                .attr("y", function(d){ //definiamo il posizionamento verticale come h - l'altezza definita nell'attirbuto
                    return h -d*5       //height
                })
                .attr("width", w / dataset.length) //definiamo la larghezza di ogni rettangolo
                .attr("height", function(d){       //definiamo l'altezza di ogni elemento con una scala  
                    return d * 5
                })
                .attr("fill", function(d){ //facciamo una variazione cromatica in funzione del peso nel vettore
                    return "rgb( 0, " + (d *10) + ", 0)"
                })
        </script>


    </body>

</html>